<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>register</title>
    <style type="text/css">
        .container{
            width: 400px;
            margin:  0 auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div style="width: 250px;margin: 0 auto;margin-bottom: 20px">注册</div>
        <div>
            <form action="http://172.0.0.1:3000" method="post">
                <div style="margin-bottom: 10px">
                    <span>手机号码：</span>
                    <input type="text" id="name">
                </div>
                <div>
                    <span>密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码：</span>
                    <input type="text" id="psw">
                </div>
                <button style="margin-top: 25px" id="btn">注册</button>
            </form>
        </div>
    </div>

    <script>
        var btn = document.getElementById("btn");
        function loadXml() {
            var xhr;
            var userName =  document.getElementById("name").value;
            var userPsw = document.getElementById("psw").value;

            if (window.XMLHttpRequest){
                xhr = new XMLHttpRequest();
            }
            else{
                xhr = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xhr.onreadystatechange = () => {

                if (xhr.readyState === 4 &&xhr.status === 200){
                   var data = xhr.responseText;
                   alert(data);
                }

                xhr.open("POST","http://127.0.0.1:3000/login",true);
                xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
                xhr.send('user=${userName.value}&psw=${userPsw.value}')
            }
        }

        btn.addEventListener('click',function () {
            loadXml();
        },false);
    </script>
</body>
</html>